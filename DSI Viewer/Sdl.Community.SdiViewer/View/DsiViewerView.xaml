<UserControl x:Class="Sdl.Community.DsiViewer.View.DsiViewerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:viewModel="clr-namespace:Sdl.Community.DsiViewer.ViewModel"
             xmlns:controls="clr-namespace:Sdl.Community.DsiViewer.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800" d:DataContext="{d:DesignInstance viewModel:DsiViewerViewModel}">
	<UserControl.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="../Styles/DataGridStyle.xaml"/>
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/ButtonResources.xaml"/>
			</ResourceDictionary.MergedDictionaries>
			<BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
			<Style TargetType="CheckBox">
				<Setter Property="VerticalContentAlignment" Value="Center"/>
			</Style>
		</ResourceDictionary>
	</UserControl.Resources>
	<StackPanel Orientation="Vertical">
		<GroupBox Header="Document Structure Information" Padding="5" Margin="2,5,2,0" Visibility="{Binding Path=HasDocumentStructureInformation, Converter={StaticResource BooleanToVisibilityConverter}}">
			<DataGrid Padding="3" Margin="5"
			          ItemsSource="{Binding Path=DocumentStructureInformation, Mode=OneWay}"
			          GridLinesVisibility="None"
			          BorderBrush="Transparent"
					  HeadersVisibility="None"
			          BorderThickness="0"
			          SelectionUnit="CellOrRowHeader"
			          IsReadOnly="True"
			          Style="{StaticResource CustomGridStyle}">
				<DataGrid.RowStyle>
					<Style TargetType="DataGridRow">
						<Setter Property="Padding" Value="2,0,2,0"/>
					</Style>
				</DataGrid.RowStyle>
				<DataGrid.ContextMenu>
					<ContextMenu>
						<MenuItem Command="Copy"/>
					</ContextMenu>
				</DataGrid.ContextMenu>
				<DataGrid.Columns>
					<DataGridTemplateColumn Header="Color" Width="5">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<Border Background="{Binding RowColor}" BorderThickness="1" BorderBrush="LightSlateGray" />
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTextColumn Width="Auto" MaxWidth="100" Header="Location" Binding="{Binding DisplayName, Mode=OneWay}">
						<DataGridTextColumn.ElementStyle>
							<Style>
								<Setter Property="TextBlock.TextWrapping" Value="NoWrap" />
								<Setter Property="TextBlock.TextTrimming" Value="CharacterEllipsis" />
								<Setter Property="TextBlock.ToolTip" Value="{Binding DisplayName}" />
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>
					<DataGridTextColumn Width="Auto" Header="Code" Binding="{Binding Code, Mode=OneWay}"/>
					<DataGridTextColumn Width="*" Header="Description" Binding="{Binding Description, Mode=OneWay}">
						<DataGridTextColumn.ElementStyle>
							<Style>
								<Setter Property="TextBlock.TextWrapping" Value="Wrap" />
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>
				</DataGrid.Columns>
			</DataGrid>
		</GroupBox>
		<GroupBox Margin="2,8,2,0" Header="Comments"  Visibility="{Binding Path=HasComments, Converter={StaticResource BooleanToVisibilityConverter}}" >
			<controls:SortAwareDataGrid  
			          ItemsSource="{Binding Path=Comments, Mode=OneWay}"
			          GridLinesVisibility="None"
			          BorderBrush="#CCCCCD"
				      SelectionMode="Single" 
			          HeadersVisibility="Column"
			          SelectionUnit="FullRow"
			          HorizontalScrollBarVisibility="Disabled"
			          BorderThickness="0" 
					  VerticalScrollBarVisibility="Auto"
			          IsReadOnly="True"
			          Style="{StaticResource CustomGridStyle}">
				<DataGrid.Columns>
					<DataGridTemplateColumn Header="Comment" Width="*" SortMemberPath="Text">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<Grid>
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="Auto"/>
										<ColumnDefinition Width="*"/>
									</Grid.ColumnDefinitions>
									<Image Grid.Column="0" Height="16" Width="16" VerticalAlignment="Center">
										<Image.Style>
											<Style TargetType="Image">
												<Setter Property="Source" Value="../Resources/information.png"/>
												<Style.Triggers>
													<DataTrigger Binding="{Binding Severity}" Value="High">
														<Setter Property="Source" Value="../Resources/error.png"/>
													</DataTrigger>
													<DataTrigger Binding="{Binding Severity}" Value="Medium">
														<Setter Property="Source" Value="../Resources/warning.png"/>
													</DataTrigger>
													<DataTrigger Binding="{Binding Severity}" Value="Low">
														<Setter Property="Source" Value="../Resources/information.png"/>
													</DataTrigger>
												</Style.Triggers>
											</Style>
										</Image.Style>
									</Image>
									<TextBlock Grid.Column="1" Margin="2,0,0,0" Text="{Binding Text, Mode=OneWay}" VerticalAlignment="Center" TextWrapping="Wrap"/>
								</Grid>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTextColumn Width="Auto" Header="Author" Binding="{Binding Author, Mode=OneWay}"/>
					<DataGridTextColumn Width="Auto" Header="Date" Binding="{Binding Date, Mode=OneWay}"/>
				</DataGrid.Columns>
			</controls:SortAwareDataGrid>
		</GroupBox>
		<GroupBox Margin="2 8 2 0" 
		          Header="SDL MT Cloud Information"
		          Visibility="{Binding Path=HasTranslationOriginMetadata, Converter={StaticResource BooleanToVisibilityConverter}}">
			<Grid HorizontalAlignment="Stretch">
				<Grid.ColumnDefinitions>
					<ColumnDefinition/>
					<ColumnDefinition/>
					<ColumnDefinition/>
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition/>
					<RowDefinition/>
				</Grid.RowDefinitions>
					<Border Grid.Row="0" Grid.RowSpan="2" Grid.Column="0" Background="{Binding TranslationOriginData.ColorCode}" BorderThickness="1" Margin="8" BorderBrush="LightSlateGray" VerticalAlignment="Stretch"/>
					<Label Grid.Row="0" Grid.Column="1" Content="Quality Estimation" HorizontalAlignment="Center" FontWeight="Black"/>
					<TextBlock Grid.Row="1" Grid.Column="1" DockPanel.Dock="Left" Text="{Binding TranslationOriginData.QualityEstimation, Mode=OneWay}" HorizontalAlignment="Center"/>
					<Label Grid.Row="0" Grid.Column="2" Content="Model" HorizontalAlignment="Center" FontWeight="Black"/>
					<TextBlock Grid.Row="1" Grid.Column="2" DockPanel.Dock="Right" Text="{Binding TranslationOriginData.Model, Mode=OneWay}" HorizontalAlignment="Center"/>
			</Grid>
		</GroupBox>
		<GroupBox Margin="2 8 2 0" Header="SDL MT Cloud Filter" >
			<Grid Margin="8 2 0 0">
				<Grid.ColumnDefinitions>
					<ColumnDefinition/>
					<ColumnDefinition/>
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="*"/>
					<RowDefinition Height="3*"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<Rectangle Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" 
				           Stroke="LightGray" StrokeThickness="0.7" RadiusX="10" RadiusY="10"/>
				<Label Grid.Row="0" Grid.Column="0" 
				       Content="by Quality Estimation" 
				       HorizontalAlignment="Left" 
				       FontWeight="ExtraLight"/>
				<StackPanel Grid.Row="1" Grid.Column="0" 
				            HorizontalAlignment="Left"
				            Margin="20 0 0 20">
					<CheckBox Content="N/A" IsChecked="{Binding SdlMtCloudFilterSettings.QeNoneAvailable}"/>
					<CheckBox Content="Poor" IsChecked="{Binding SdlMtCloudFilterSettings.QePoor}"/>
					<CheckBox Content="Good" IsChecked="{Binding SdlMtCloudFilterSettings.QeGood}"/>
					<CheckBox Content="Adequate" IsChecked="{Binding SdlMtCloudFilterSettings.QeAdequate}"/>
				</StackPanel>

				<Rectangle Grid.Row="0" Grid.Column="1" Grid.RowSpan="2" 
						   Margin="5 0 0 0"
				           Stroke="LightGray" StrokeThickness="0.7" RadiusX="10" RadiusY="10"/>
					<Label Grid.Row="0" Grid.Column="1"
					       HorizontalAlignment="Center"
					       FontWeight="Medium">
						<CheckBox x:Name="ByModel"
								  IsChecked="{Binding SdlMtCloudFilterSettings.ByModel}"
						          Content="by Model" />
					</Label>
					<TextBox Grid.Row="1" Grid.Column="1"
							 Margin="0 10 0 0"
							 MinWidth="140"
					         HorizontalAlignment="Center"
							 VerticalContentAlignment="Center"
							 Text="{Binding SdlMtCloudFilterSettings.Model}"
					         VerticalAlignment="Top"
					         TextAlignment="Justify"
					         Height="20"
					         IsEnabled="{Binding ElementName=ByModel, Path=IsChecked}" />
				<Button Grid.Column="1" Grid.Row="2" 
						Margin="0 5 0 0"
						Cursor="Hand"
						Width="Auto"
						Command="{Binding ApplySdlMtCloudFilter}"
						HorizontalAlignment="Right"
				        Content="Apply filter"
				        Style="{StaticResource Sdl.Button.SecondaryStyle}"/>
			</Grid>
		</GroupBox>
	</StackPanel>
</UserControl>
