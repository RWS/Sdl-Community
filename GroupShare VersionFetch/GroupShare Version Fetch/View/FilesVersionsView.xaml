<UserControl x:Class="Sdl.Community.GSVersionFetch.View.FilesVersionsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:gsVersionFetch="clr-namespace:Sdl.Community.GSVersionFetch"
             xmlns:uiHelpers="clr-namespace:Sdl.Community.GSVersionFetch.UiHelpers"
             xmlns:viewModel="clr-namespace:Sdl.Community.GSVersionFetch.ViewModel"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800" d:DataContext="{d:DesignInstance viewModel:FilesVersionsViewModel}">
    <UserControl.Resources>
        <ResourceDictionary x:Uid="ResourceDictionary_1">
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../UiHelpers/General.xaml" />
                <ResourceDictionary Source="../UiHelpers/Buttons.xaml" />
                <ResourceDictionary Source="../UiHelpers/DataGridStyle2.xaml" />
                <ResourceDictionary Source="../UiHelpers/WatermarkTextBoxResources.xaml" />
                <ResourceDictionary Source="../UiHelpers/CustomProgressRing.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <uiHelpers:ImageToBitmapImageConverter x:Key="ImageConverter" />

            <Style x:Key="CheckBoxStyle" TargetType="{x:Type CheckBox}" BasedOn="{StaticResource {x:Type CheckBox}}">
                <Setter Property="Padding" Value="5" />
                <Setter Property="FontFamily" Value="Segoe UI" />
            </Style>
            <Style x:Key="SearchBoxStyle" TargetType="{x:Type TextBox}" BasedOn="{StaticResource WatermarkTextBox}">
                <Setter Property="Height" Value="24" />
                <Setter Property="Margin" Value="5 5 0 0" />
                <Setter Property="Width" Value="200" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="VerticalAlignment" Value="Center" />
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="1"
                   Margin="5 0 0 20" FontFamily="Segoe UI"
                   Text="{Binding TextMessage}"
                   Visibility="{Binding TextMessageVisibility}"
                   Foreground="{Binding TextMessageBrush}" />

        <DockPanel Grid.Row="1" Margin="5,10,5,10">
            <WrapPanel>
                <TextBlock Style="{DynamicResource TextBoxFontFamily}" DockPanel.Dock="Left" FontSize="13"
                           Text="{x:Static gsVersionFetch:PluginResources.TextBlockText_SelectSpecificVersion}"
                           Width="auto" Margin="0,0,5,0" VerticalAlignment="Center" />
                <TextBox Text="{Binding SelectedVersion,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Height="24"
                         VerticalAlignment="Center"
					     VerticalContentAlignment="Center"
                         Width="50" Margin="10,5,0,0"
                         ToolTip="Add version and hit ENTER">
                    <TextBox.InputBindings>
                        <KeyBinding Key="Enter" Command="{Binding EnterCommand}" />
                    </TextBox.InputBindings>
                </TextBox>

                <TextBox Text="{Binding SearchByProjectNameText,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource SearchBoxStyle}"
                         uiHelpers:TextBoxWatermarkHelper.ButtonCommandParameter="SearchByProjectName"
                         uiHelpers:TextBoxWatermarkHelper.ButtonCommand="{Binding ClearCommand}"
                         uiHelpers:TextBoxWatermarkHelper.WatermarkText="{x:Static gsVersionFetch:PluginResources.SearchByProjectName_TextBox_Watermark}" />

                <TextBox Text="{Binding SearchByCommentText,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource SearchBoxStyle}"
                         uiHelpers:TextBoxWatermarkHelper.ButtonCommandParameter="SearchByComment"
                         uiHelpers:TextBoxWatermarkHelper.ButtonCommand="{Binding ClearCommand}"
                         uiHelpers:TextBoxWatermarkHelper.WatermarkText="{x:Static gsVersionFetch:PluginResources.SearchByComment_TextBox_Watermark}" />

                <TextBox Text="{Binding SearchByAuthorText,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource SearchBoxStyle}"
                         uiHelpers:TextBoxWatermarkHelper.ButtonCommandParameter="SearchByAuthor"
                         uiHelpers:TextBoxWatermarkHelper.ButtonCommand="{Binding ClearCommand}"
                         uiHelpers:TextBoxWatermarkHelper.WatermarkText="{x:Static gsVersionFetch:PluginResources.SearchByAuthor_TextBox_Watermark}" />
            </WrapPanel>

            <Button Style="{DynamicResource SdlPrimaryButtonStyle}" Command="{Binding DownloadFilesCommand}" HorizontalAlignment="Right" Content="Download files" Margin="5 0 0 0" />
        </DockPanel>

        <DataGrid
		    Grid.Row="2"
		    ItemsSource="{Binding FilesVersions, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
	        SelectionMode="Extended"
	        Padding="5"
	        SelectionUnit="FullRow"
	        Style="{StaticResource FilesGridStyle}"
	        GridLinesVisibility="None"
	        VerticalScrollBarVisibility="Auto"
	        VerticalContentAlignment="Center"
	        IsReadOnly="True">
            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow" BasedOn="{StaticResource DgrStyle}" />
            </DataGrid.RowStyle>
            <DataGrid.Columns>
                <DataGridTemplateColumn Width="Auto">
                    <DataGridTemplateColumn.Header>
                        <CheckBox IsChecked="{Binding Path=DataContext.AllFilesChecked, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
						          VerticalContentAlignment="Center"
						          Style="{StaticResource CheckBoxStyle}" />
                    </DataGridTemplateColumn.Header>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox Style="{StaticResource CheckBoxStyle}" IsChecked="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
							          Margin="4,0,0,0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn  Header="File name" SortMemberPath="FileName" Width="2*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <Image Source="../Resources/text_proofread.ico" Width="25" Height="25" />
                                <TextBlock Text="{Binding FileName}" Margin="5" TextTrimming="WordEllipsis" VerticalAlignment="Center" ToolTip="{Binding FileName}" />
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Width="Auto" Header="Version" SortMemberPath="Version">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Version,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Center" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Width="Auto" Header="Language">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Image Source="{Binding Path=LanguageFlagImage, Converter={StaticResource ImageConverter}}" Width="24" Height="24" ToolTip="{Binding LanguageName}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Width="2*" Header="Project name" SortMemberPath="ProjectName">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ProjectName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" TextTrimming="WordEllipsis" ToolTip="{Binding ProjectName}" VerticalAlignment="Center" Margin="0,0,5,0" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Width="*" Header="Comment" SortMemberPath="CheckInComment">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding CheckInComment,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ToolTip="{Binding CheckInComment}" VerticalAlignment="Center" Margin="0,0,5,0" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Width="*" Header="Created At">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding CreatedAt,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ToolTip="{Binding CreatedAt}" VerticalAlignment="Center" Margin="0,0,5,0" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Width="*" Header="Created By" SortMemberPath="CreatedBy">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding CreatedBy,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ToolTip="{Binding CreatedBy}" VerticalAlignment="Center" Margin="0,0,5,0" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>