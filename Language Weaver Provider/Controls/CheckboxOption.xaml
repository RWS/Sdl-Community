<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					xmlns:local="clr-namespace:LanguageWeaverProvider.Controls"
					xmlns:converters="clr-namespace:LanguageWeaverProvider.Converters">

	<ResourceDictionary.MergedDictionaries>
		<ResourceDictionary Source="../Controls/WatermarkTextBoxResources.xaml" />
		<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/ButtonResources.xaml" />
	</ResourceDictionary.MergedDictionaries>

	<converters:BooleanToVisibilityConverter x:Key="BooleanConverter" />
	<converters:EmptyStringToBooleanConverter x:Key="StringToBooleanConverter" />
	<converters:MultiBooleanToVisibilityConverter x:Key="MultiBooleanConverter" />

	<Style TargetType="{x:Type local:CheckboxOption}">
		<Setter Property="Focusable"
				Value="False" />
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:CheckboxOption}">
					<Grid Grid.Row="0"
							  Grid.Column="0">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

							<Grid.RowDefinitions>
								<RowDefinition Height="Auto" />
								<RowDefinition Height="*" />
							</Grid.RowDefinitions>

                            <StackPanel VerticalAlignment="Center"
                                        Margin="15,2,5,2" Orientation="Horizontal">
                                <CheckBox Grid.Column="0"
										  x:Name="ToggleCheckBox"
										  Content="{TemplateBinding CheckBoxContent}"
										  AutomationProperties.HelpText="{TemplateBinding DescriptionText}"
										  IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Checked}"
										  HorizontalAlignment="Left"
										  VerticalAlignment="Center"
										  Margin="0 0 4 0" />
                                <Image Source="../Resources/Information.png"
                                       Height="16" HorizontalAlignment="Left"
                                       RenderOptions.BitmapScalingMode="NearestNeighbor"                                             
									   RenderOptions.EdgeMode="Aliased"
									   VerticalAlignment="Center"
									   Margin="0,0,0,0">
                                    <Image.ToolTip>
                                        <StackPanel>
                                            <TextBlock MaxWidth="600" TextWrapping="Wrap" 
                                                       Text="{TemplateBinding DescriptionText}"/>
                                        </StackPanel>
                                    </Image.ToolTip>
                                </Image>
                            </StackPanel>
                            
							<TextBox 
								     Grid.Row="1"	
									 Grid.ColumnSpan="2"
									 Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TextBoxText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
									 Style="{StaticResource WatermarkTextBox}"
									 local:TextBoxWatermarkHelper.WatermarkText="{TemplateBinding CheckBoxContent}"
									 local:TextBoxWatermarkHelper.IsWatermarkVisible="True"
									 local:TextBoxWatermarkHelper.ButtonCommand="{TemplateBinding ClearButtonCommand}"
									 local:TextBoxWatermarkHelper.ButtonCommandParameter="{TemplateBinding ClearButtonParameter}"
									 AutomationProperties.HelpText="{TemplateBinding CheckBoxContent}"
									 Height="24"
                                     Margin="35,0,0,0"
									 VerticalContentAlignment="Center"
									 TextWrapping="Wrap">
								<TextBox.Visibility>
									<MultiBinding Converter="{StaticResource MultiBooleanConverter}">
										<Binding Path="TextBoxVisible"
												 RelativeSource="{RelativeSource TemplatedParent}" />
									</MultiBinding>
								</TextBox.Visibility>
							</TextBox>

                        <StackPanel Grid.Column="3">
                            <Button x:Name="ActionButton"
								Content="{TemplateBinding ButtonContent}"
								Command="{TemplateBinding ButtonCommand}"
								CommandParameter="{TemplateBinding ButtonParameter}"
								HorizontalAlignment="Left"
								Width="80"
								Height="24"
								Cursor="Hand"
								Margin="5,0,0,0"
								Padding="0">
                                <Button.Visibility>
                                    <MultiBinding Converter="{StaticResource MultiBooleanConverter}">
                                        <Binding Path="IsChecked"
											 ElementName="ToggleCheckBox" />
                                        <Binding Path="ButtonContent"
											 RelativeSource="{RelativeSource TemplatedParent}">
                                            <Binding.Converter>
                                                <converters:EmptyStringToBooleanConverter />
                                            </Binding.Converter>
                                        </Binding>
                                    </MultiBinding>
                                </Button.Visibility>
                            </Button>

                            <TextBlock
								   Text="{TemplateBinding TextBlockText}"
								   Visibility="{TemplateBinding TextBlockVisibility, Converter={StaticResource BooleanConverter}}"
								   Focusable="{TemplateBinding TextBlockText, Converter={StaticResource StringToBooleanConverter}}"
								   FontSize="10"
								   TextWrapping="Wrap"
								   HorizontalAlignment="Right"/>
                        </StackPanel>
                        
							
						</Grid>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
</ResourceDictionary>