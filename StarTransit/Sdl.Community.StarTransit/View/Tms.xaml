<UserControl x:Class="Sdl.Community.StarTransit.View.Tms"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Sdl.Community.StarTransit.View"
             xmlns:resx="clr-namespace:Sdl.Community.StarTransit"
             xmlns:viewModels="clr-namespace:Sdl.Community.StarTransit.ViewModel"
             xmlns:converters="clr-namespace:Sdl.Community.StarTransit.Converter"
             xmlns:controls="clr-namespace:Sdl.Desktop.Platform.Controls.Controls;assembly=Sdl.Desktop.Platform.Controls"
             xmlns:sdlConverters="clr-namespace:Sdl.Desktop.Platform.Controls.Converters;assembly=Sdl.Desktop.Platform.Controls"
             xmlns:models1="clr-namespace:Sdl.Community.StarTransit.Shared.Models;assembly=Sdl.Community.StarTransit.Shared"
             d:DataContext="{d:DesignInstance viewModels:TmsViewModel}"
             Height="{Binding Path=ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type HeaderedContentControl}}}"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
	<UserControl.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/ButtonResources.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/radiobuttonresources.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/textblockresources.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/RadioButtonResources.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/GroupboxResources.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/datagridresources.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/NumericUpDown.xaml" />
				<ResourceDictionary Source="../UiHelpers/General.xaml" />
				<ResourceDictionary Source="../UiHelpers/Buttons.xaml" />
			</ResourceDictionary.MergedDictionaries>
			<converters:ImageToBitmapImageConverter x:Key="ImageConverter" />
			<converters:NullVisibilityConverter x:Key="NullVisibilityConverter" />
			<BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
		</ResourceDictionary>
	</UserControl.Resources>
	<Grid Height="{Binding Path=ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<TextBlock
			Margin="10 0 0 10"
			FontSize="15"
			Grid.Row="0">
			<TextBlock.Style>
				<Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource Sdl.TextBlock.SubtitleStyle}">
					<Style.Triggers>
						<DataTrigger Binding="{Binding PackageContainsTms}" Value="True">
							<Setter Property="Text" Value="{x:Static resx:PluginResources.Tm_PageDescription}"/>
						</DataTrigger>
						<DataTrigger Binding="{Binding PackageContainsTms}" Value="False">
							<Setter Property="Text" Value="{x:Static resx:PluginResources.Tm_NoTmAvailableMessage}"/>
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</TextBlock.Style>
		</TextBlock>
		<TextBlock Grid.Row="1" 
		           HorizontalAlignment="Center" FontSize="15"
		           Style="{StaticResource Sdl.TextBlock.ErrorTitleStyle}"
		           Text="{Binding ErrorMessage}"
		           Visibility="{Binding ErrorMessage, Converter={StaticResource NullVisibilityConverter}, ConverterParameter=Inverted}" />
		<ScrollViewer Grid.Row="2"
					  Visibility="{Binding PackageContainsTms,Converter={StaticResource BooleanToVisibilityConverter}}"
		              VerticalScrollBarVisibility="Auto" 
		              PreviewMouseWheel="OnPreviewMouseWheel">
			<DataGrid
				Name="TmsOptions"
				AutoGenerateColumns="False"
				HeadersVisibility="None"
				GridLinesVisibility="None"
				IsReadOnly="True"
				IsSynchronizedWithCurrentItem="True"
				Background="Transparent"
				BorderThickness="0"
				Margin="10 "
				SelectionMode="Single"
				ItemsSource="{Binding LanguagePairsTmOptions}"
				SelectedItem="{Binding SelectedLanguagePair,UpdateSourceTrigger=PropertyChanged}">
				<DataGrid.RowStyle>
					<Style TargetType="{x:Type DataGridRow}" BasedOn="{StaticResource DataGridRowStyle}" />
				</DataGrid.RowStyle>
				<DataGrid.CellStyle>
					<Style TargetType="{x:Type DataGridCell}" BasedOn="{StaticResource CellStyle}" />
				</DataGrid.CellStyle>
				<DataGrid.Columns>
					<DataGridTemplateColumn Width="*">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<DockPanel LastChildFill="True">
									<DockPanel LastChildFill="false" DockPanel.Dock="Top">
										<Image DockPanel.Dock="Left" Source="{Binding SourceFlag , Converter={StaticResource ImageConverter}}"
										       Width="20" Height="20" />
										<Image Source="../Resources/arrow_right_blue.png" Width="12" Margin="5,0,5,0" Height="15" />
										<Image Source="{Binding Path=TargetFlag, Converter={StaticResource ImageConverter}}" Width="24" Height="24" />
										<Button
											Margin="0 0 10 0"
											DockPanel.Dock="Right"
											Cursor="Hand"
											Style="{StaticResource Sdl.Button.SecondaryStyle}"
											Content="{x:Static resx:PluginResources.PackageDetails_Browse}"
											Command="{ Binding SelectTmCommand}"
											Visibility="{Binding ChoseExistingTm,Converter={StaticResource BooleanToVisibilityConverter}}" />
									</DockPanel>
									<DockPanel DockPanel.Dock="Top" LastChildFill="false">
										<RadioButton
											Margin="0 10 10 0"
											IsChecked="{Binding NoTm,UpdateSourceTrigger=PropertyChanged}"
											Content="{x:Static resx:PluginResources.Tm_CreateWitoutTm}" />
										<RadioButton
											Margin="0 10 10 0"
											IsChecked="{Binding CreateNewTm,UpdateSourceTrigger=PropertyChanged}"
											Content="{x:Static resx:PluginResources.Tm_CreateTm}" />
										<RadioButton
											Margin="0 10 10 0"
											IsChecked="{Binding ChoseExistingTm,UpdateSourceTrigger=PropertyChanged}"
											Content="{x:Static resx:PluginResources.Tm_BrowseTm}" />
										<DockPanel
											Visibility="{Binding TmName,Converter={StaticResource NullVisibilityConverter}}">
											<Image Margin="20 0 0 0" Width="15" Height="15" Source="../Resources/translationmemory.ico" />
											<TextBlock Margin="5 0 0 0"
											           VerticalAlignment="Center"
											           Text="{Binding TmName}" />
											<Button Style="{StaticResource EmptyButton}"
											        Margin="10"
											        Command="{Binding RemoveSelectedTmCommand}">
												<Button.ToolTip>
													<ToolTip Content="{x:Static resx:PluginResources.Tm_RemoveTmTooltip}"
													         Style="{StaticResource ToolTipStyle}" />
												</Button.ToolTip>
												<Image Width="14" Height="13" Source="../Resources/trash-alt.png" />
											</Button>
										</DockPanel>
									</DockPanel>
									<DataGrid DockPanel.Dock="Bottom"
											  Name="PenaltyGrid"
											  d:DataContext="{d:DesignInstance models1:StarTranslationMemoryMetadata}"
									          Margin="0 10 0 0"
									          GridLinesVisibility="None"
									          SelectionUnit="FullRow"
									          SelectionMode="Single"
									          Width="500"
									          HorizontalAlignment="Left"
									          Visibility="{Binding CreateNewTm,Converter={StaticResource BooleanToVisibilityConverter} }"
									          Style="{StaticResource Sdl.DataGrid.GenericStyle}"
									          ItemsSource="{Binding StarTranslationMemoryMetadatas}">
										<DataGrid.Columns>
											<DataGridTemplateColumn CanUserResize="False">
												<DataGridTemplateColumn.CellTemplate>
													<DataTemplate>
														<CheckBox 
															VerticalAlignment="Center"
															HorizontalAlignment="Center"
															IsChecked="{Binding IsChecked,UpdateSourceTrigger=PropertyChanged}"/>
													</DataTemplate>
												</DataGridTemplateColumn.CellTemplate>
											</DataGridTemplateColumn>

											<DataGridTemplateColumn Header="{x:Static resx:PluginResources.Wizard_TmsName_Header}" Width="*">
												<DataGridTemplateColumn.CellTemplate>
													<DataTemplate>
														<StackPanel Orientation="Horizontal">
															<Image Width="15" Height="15">
																<Image.Style>
																	<Style TargetType="Image">
																		<Style.Triggers>
																			<DataTrigger Binding="{Binding IsMtFile}" Value="False">
																				<Setter Property="Source" Value="../Resources/TranslationMemory.ico" />
																			</DataTrigger>
																			<DataTrigger Binding="{Binding IsMtFile}" Value="True">
																				<Setter Property="Source" Value="../Resources/AutomatedTranslation.ico" />
																			</DataTrigger>
																		</Style.Triggers>
																	</Style>
																</Image.Style>
															</Image>
															<TextBlock Text="{Binding Name}" Margin="5" VerticalAlignment="Center" />
														</StackPanel>
													</DataTemplate>
												</DataGridTemplateColumn.CellTemplate>
											</DataGridTemplateColumn>
											<DataGridTemplateColumn Header="{x:Static resx:PluginResources.Wizard_Penalty_Header}" Width="100">
												<DataGridTemplateColumn.CellTemplate>
													<DataTemplate>
														<controls:NumericUpDown Style="{StaticResource Sdl.NumericUpDown.Generic}" Minimum="0" Maximum="25"
															Value="{Binding TmPenalty,UpdateSourceTrigger=PropertyChanged}" />
													</DataTemplate>
												</DataGridTemplateColumn.CellTemplate>
											</DataGridTemplateColumn>
										</DataGrid.Columns>
									</DataGrid>
								</DockPanel>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
				</DataGrid.Columns>
			</DataGrid>
		</ScrollViewer>
	</Grid>
</UserControl>
